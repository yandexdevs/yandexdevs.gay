# Как изучать UBIFS Прошивки от Яндекса?



> бакап со старого сайта

Это краткое руководство для исследователей, которые хотят заглянуть внутрь прошивок Яндекс-устройств и понять, как они устроены.
По своему опыту сделано!



## Зачем это нужно?

*Некоторые прошивки (например, для yandexmini_2, saturn, cucumber и др.) содержат образ rootfs в формате UBI или UBIFS.*



Если вы нашли в прошивке файл с названием вроде:

`rootfs.ubi`

или

`rootfs.ubifs`

....то вы на правильном пути. Этот образ можно извлечь и исследовать.



## Как распаковать `.ubi`/`.ubifs`?



**Делайте это ТОЛЬКО если нашли UBIFS-образ. Если у вас Android-прошивка — эти методы не подойдут.**



Метод: ubidump

```
    git clone https://github.com/nlitsme/ubidump
    cd ubidump
    pip install -r requirements.txt
```

На некоторых платформах тебе может понадобиться установить некоторые либы для 
`#include <lzo1x.h>
`В этом мы тебе не поможем, но могу лишь подсказать: `liblzo2-dev`/`lzo-devel`



Для того чтобы проверить что это точно реальный ubifs:

```shell
python3 ubidump.py --dumptree rootfs.ubi    
```

Проверили и этот тот образ? Делаем:

```shell
python3 ubidump.py --savedir out_rootfs rootfs.ubi```
```



## ЖЕЛАТЕЛЬНЫЙ ЭТАП У ИССЛЕДОВАНИЯ - CHROOT

Перейди в дирректорию с рутфс (привет `out_rootfs`) и туда вкидываем бинарь от qemu - qemu-arm-static

> > > погуглите, у каждой дистрибуции он в своей директории, а на маках его вообще нет :pp

а потом чрутимся с запуском шелла, подскажу `/usr/bin/qemu-arm-static /bin/sh`




